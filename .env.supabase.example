# ==============================================
# Radiology AI Suite - Supabase Configuration
# ==============================================
# This template shows how to configure the application with Supabase PostgreSQL

# ==============================================
# SUPABASE DATABASE CONFIGURATION (REQUIRED)
# ==============================================

# Option 1: Direct Supabase Connection (Recommended for development)
# Get this from: Supabase Dashboard > Settings > Database > Connection String > URI
SUPABASE_DATABASE_URL=postgresql://postgres.[YOUR-PROJECT-REF]:[YOUR-PASSWORD]@aws-0-us-east-1.pooler.supabase.com:5432/postgres

# Option 2: Supabase Connection Pooler (Recommended for production)
# Get this from: Supabase Dashboard > Settings > Database > Connection String > Connection Pooling
SUPABASE_POOLER_ENABLED=false
SUPABASE_POOLER_URL=postgresql://postgres.[YOUR-PROJECT-REF]:[YOUR-PASSWORD]@aws-0-us-east-1.pooler.supabase.com:6543/postgres

# ==============================================
# DATABASE LEGACY SETTINGS (Not needed with Supabase)
# ==============================================
USE_SQLITE=false
# DATABASE_URL is not needed if SUPABASE_DATABASE_URL is set

# ==============================================
# REQUIRED: AI/ML Configuration
# ==============================================
GEMINI_API_KEY=your_google_gemini_api_key_here
GOOGLE_API_KEY=your_google_gemini_api_key_here  # Alternative name
GEMINI_MODEL=gemini-2.0-flash-exp

# ==============================================
# Authentication & Security
# ==============================================
SECRET_KEY=your_secret_key_change_in_production_use_openssl_rand_hex_32
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# ==============================================
# Redis Cache Configuration (Optional)
# ==============================================
# For production, consider using Upstash Redis (free tier available)
# https://upstash.com/
CACHE_ENABLED=false
REDIS_URL=redis://default:[PASSWORD]@[HOST]:6379

# Alternative Redis configuration
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0

# ==============================================
# Qdrant Vector Database (Optional - RAG features)
# ==============================================
# For production, use Qdrant Cloud (free tier available)
# https://cloud.qdrant.io/
QDRANT_HOST=localhost
QDRANT_PORT=6333
QDRANT_COLLECTION=radiology_reports

# ==============================================
# CRITICAL NOTIFICATIONS Email Configuration
# ==============================================
CRITICAL_NOTIFICATIONS_ENABLED=true

# SMTP Server Settings (Gmail example)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your_email@gmail.com
SMTP_PASSWORD=your_app_specific_password

# Email sender information
FROM_EMAIL=your_email@gmail.com
FROM_NAME=Radiology AI Suite - Critical Alerts

# ==============================================
# BACKUP & DISASTER RECOVERY Configuration
# ==============================================
# Note: Supabase provides automatic backups
# These settings are for additional application-level backups
BACKUP_ENABLED=true
BACKUP_DIR=/app/backups
BACKUP_RETENTION_DAYS=30
MAX_BACKUPS=50

# ==============================================
# VOICE DICTATION Configuration (Whisper AI)
# ==============================================
VOICE_DICTATION_ENABLED=true
WHISPER_MODEL=base
WHISPER_LANGUAGE=auto

# Optional: Use OpenAI Whisper API instead of local model
USE_OPENAI_WHISPER_API=false
OPENAI_API_KEY=your_openai_api_key_here

# ==============================================
# DICOM Integration Configuration
# ==============================================
DICOM_ENABLED=true
DICOM_UPLOAD_DIR=/app/dicom_storage
DICOM_MAX_FILE_SIZE=104857600

# ==============================================
# Application Settings
# ==============================================
APP_NAME=Radiology AI Suite
APP_VERSION=1.0.0
DEBUG=false

# ==============================================
# FRONTEND CONFIGURATION (for deployment)
# ==============================================
# Replace with your actual frontend URL in production
FRONTEND_URL=http://localhost:5173
CORS_ORIGINS=http://localhost:5173,http://localhost:3000

# ==============================================
# SUPABASE SETUP INSTRUCTIONS
# ==============================================
#
# 1. Create a Supabase project:
#    - Go to https://supabase.com/dashboard
#    - Click "New Project"
#    - Choose a name, database password, and region
#    - Wait for project to be provisioned (~2 minutes)
#
# 2. Get your database connection string:
#    - Go to Settings > Database
#    - Scroll to "Connection String"
#    - Copy the "URI" connection string
#    - Replace [YOUR-PASSWORD] with your database password
#    - Set as SUPABASE_DATABASE_URL
#
# 3. Initialize your database:
#    - Install dependencies: pip install -r requirements.txt
#    - Run: python backend/init_supabase_db.py
#
# 4. (Optional) Enable connection pooling for production:
#    - In Supabase Dashboard > Settings > Database
#    - Copy the "Connection Pooling" string (port 6543)
#    - Set SUPABASE_POOLER_ENABLED=true
#    - Set SUPABASE_POOLER_URL with the pooling connection string
#
# 5. (Optional) Configure Row Level Security (RLS):
#    - Go to Database > Policies in Supabase Dashboard
#    - Enable RLS for your tables
#    - Create policies based on your security requirements
#
# 6. Monitor your database:
#    - Use Supabase Dashboard > Database > Logs
#    - Monitor query performance and connections
#
# ==============================================
# SUPABASE FREE TIER LIMITS
# ==============================================
# - 500 MB database space
# - Unlimited API requests
# - 50,000 monthly active users
# - Automatic backups (7 days retention)
# - 2 GB file storage
# - 5 GB bandwidth
#
# For production workloads, consider upgrading to Pro ($25/month)
# ==============================================

# ==============================================
# IMPORTANT SECURITY NOTES
# ==============================================
# 1. NEVER commit this file with real credentials to git
# 2. Use strong, unique passwords for production
# 3. Generate SECRET_KEY with: openssl rand -hex 32
# 4. For Gmail SMTP: Use App Passwords, not your regular password
# 5. Enable Row Level Security (RLS) in Supabase for production
# 6. Use environment variables in production (Railway, Render, etc.)
# 7. Rotate credentials regularly
# ==============================================
